---
toc_max_heading_level: 4
---

# Overview

Projects often encounter a constraint or requirement which make free-tier hosted CI/CD runners
insufficient for their needs. In these cases hosting your own CI/CD runner can be a viable
alternative to premium-tier services or subscriptions. Self-hosting may also provide access to
resources that are simply not available on many CI/CD services such as GPUs, faster drives, and
newer CPU models.

This guide will cover two basic methods for hosting CI/CD runners: Bare-Metal and Virtual Machines.
Containerized hosts will not be discussed because of their inherent reliance on insecure practices
such as
[Docker-in-Docker](http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/),
[Priviledged Continers](https://www.trendmicro.com/en_th/research/19/l/why-running-a-privileged-container-in-docker-is-a-bad-idea.html)
and the additional tooling required to mitigate those risks such as
[Kaniko](https://github.com/GoogleContainerTools/kaniko) or
[Kata Containers](https://katacontainers.io/).

## Constraints

There are many ways to self-host CI/CD runners, and which one is best for you will depend on your on
situation and constraints. For the purpose of this guide we will make the following assumptions:

- üíª User already has their own hardware
- üí∏ Budget is $0
- üõ†Ô∏è FOSS tools should be prioritized where possible
- üìú We define `Self-Hosting` in this context to refer to a user taking responsibilty for the
  operating-system level configuration and life-cycle-management of a given compute resource (metal,
  on-prem, cloud VM, VPS etc...)

## Requirements

This guide is tested on devics which meet the following requirements:

- x86 or amd64 processor
- Ubuntu 22.04 LTS Server or Debian 12 Bookworm
- Root access to the operating system
- Network connectivity

:::info Support for GPU-acceleration within containerized environments is limited to Nvidia hardware
only at this time. :::

## Host Creation Methods

### 1. Bare-Metal (Easiest)

"Bare Metal" means that your host OS is running directly on a piece of hardware without any
virtulization. This reduces the complexity of deploymnet at the cost of increased time and effort
for re-provisioning the host. The following guides will walk you through the installation process on
a bare-metal host.

- Install Ubuntu 22.04 on a local machine
- Install Debian 12 on a local machine

### 2. Virtual Machines (Intermediate)

Virtual Machines are a software-defined layer of abstraction atop a Bare-Metal host which makes
deployments more consistent and easier to manage declaratively. This greaty reduces the difficulty
of re-deployment and creates the conditions required for securely running multiple guests within the
same physical host. Virtual Machines can also be used to create hosts that run different operating
systems (Windows, MacOS) or architectures (ARM) than the host machines. This added functionality
comes at the cost of added complexity, a slight performance penalty, and you need to already have a
Bare-Metal host on which to run the VMs.

- Basic Virtual Machine creation with Multipass
- Advanced Virtual Machine creation with QEMU

### 3. Cloud-Init (Advanced)

Cloud-Init is a software package that automates the initialization of cloud instances during system
boot and has become the industry standard solution for operating system customization. Cloud-Init is
directly integrated into nearly every operating system which publishes a cloud-image, as well as
supported by most cloud-providers and virtual machine managers. Cloud-init can also provision
bare-metal systems running Ubuntu.

- Create custom Ubuntu installation images based on cloud-init using
  [PXEless](https://github.com/cloudymax/pxeless)
- Using cloud-init with Multipass for automated provisioning
- Use your cloud-init config to deploy VMs in the cloud

## Host Provisioning Methods

"Provisioning" here refers to the process of installing additional resources onto, and the
configuration of your host beyond installing the base operating-system. Once you can sign into your
VM or Bare-Metal host, follow the appropriate guide to complete the provisioning process.

- [Ubuntu 22.04 Setup](./ubuntu-setup)

- [Debian 12 Setup](./debian-setup)

## Runner Application Installation

- [Github Actions](./github-actions)

- [GitLab Pipelines](./gitlab-pipelines)
